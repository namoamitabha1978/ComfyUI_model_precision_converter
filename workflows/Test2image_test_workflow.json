{"id":"0ba79787-3cb0-4387-b20d-77ac43f4e221","revision":0,"last_node_id":41,"last_link_id":54,"nodes":[{"id":21,"type":"Florence2Run","pos":[-321.2613525390625,-623.6954345703125],"size":[285.57952880859375,369],"flags":{},"order":6,"mode":4,"inputs":[{"label":"图像","localized_name":"image","name":"image","type":"IMAGE","link":25},{"label":"Florence2","localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":23},{"localized_name":"文本","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"任务","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"填充遮罩","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"保持模型加载","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"最大输出Token","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"采样","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"选中输出遮罩","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"随机种","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"label":"图像","localized_name":"image","name":"image","type":"IMAGE","links":null},{"label":"遮罩","localized_name":"mask","name":"mask","type":"MASK","links":null},{"label":"caption","localized_name":"caption","name":"caption","type":"STRING","links":[28]},{"label":"json数据","localized_name":"data","name":"data","type":"JSON","links":null}],"properties":{"cnr_id":"comfyui-florence2","ver":"6b3064b8bdfe0afca123918804300271995b0be5","Node name for S&R":"Florence2Run","widget_ue_connectable":{}},"widgets_values":["","more_detailed_caption",true,false,1024,3,true,"",843268807916251,"randomize",[false,true]]},{"id":26,"type":"ShowText|pysssss","pos":[13.625638008117676,-804.3400268554688],"size":[242.22718811035156,549.37158203125],"flags":{},"order":8,"mode":4,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":28}],"outputs":[{"label":"字符串","localized_name":"字符串","name":"STRING","shape":6,"type":"STRING","links":[43]}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"aac13aa7ce35b07d43633c3bbe654a38c00d74f5","Node name for S&R":"ShowText|pysssss","widget_ue_connectable":{}},"widgets_values":["A digital illustration shoot from the side about a young man sitting at a wooden table, writing on a piece of paper with a pen, wearing a light blue kimono and white pants. the man, who appears to be in his early twenties, has long, dark hair tied in a single hair bun, which is tied back with a hair stick. he is focused on writing, with a serious expression on his face, and his eyes are closed as he sits at the table. on the table in front of him, there is a small blue bowl with a black inkwell, a wooden stand with writing utensils, and a stack of books. the background features a window with white curtains and a potted plant, which adds to the cozy atmosphere of the scene. the style is reminiscent of traditional chinese art, with soft shading and delicate details that bring the scene to life."]},{"id":20,"type":"Florence2ModelLoader","pos":[-316.7545166015625,-830.2742309570312],"size":[288.740234375,130],"flags":{},"order":0,"mode":4,"inputs":[{"label":"LoRA","localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null},{"localized_name":"模型","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"精度","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"注意力","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"convert_to_safetensors","name":"convert_to_safetensors","shape":7,"type":"BOOLEAN","widget":{"name":"convert_to_safetensors"},"link":null}],"outputs":[{"label":"Florence2","localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[23]}],"properties":{"cnr_id":"comfyui-florence2","ver":"6b3064b8bdfe0afca123918804300271995b0be5","Node name for S&R":"Florence2ModelLoader","widget_ue_connectable":{}},"widgets_values":["Florence-2-large","fp16","sdpa",false]},{"id":23,"type":"LoadImageOutput","pos":[-612.5989379882812,-842.6765747070312],"size":[270,362.0000305175781],"flags":{},"order":1,"mode":4,"inputs":[{"label":"image","localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"label":"upload","localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"label":"IMAGE","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[25]},{"label":"MASK","localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"LoadImageOutput","widget_ue_connectable":{}},"widgets_values":["ComfyUI_00353_.png [output]",false,"refresh","image"]},{"id":38,"type":"Reroute","pos":[617.041015625,-888.8348999023438],"size":[75,26],"flags":{},"order":13,"mode":4,"inputs":[{"name":"","type":"*","link":50}],"outputs":[{"name":"","type":"STRING","links":[52]}],"properties":{"showOutputText":false,"horizontal":false,"widget_ue_connectable":{}}},{"id":36,"type":"PrimitiveString","pos":[309.3704833984375,-423.8326110839844],"size":[293.8792724609375,75.36680603027344],"flags":{},"order":2,"mode":4,"inputs":[{"label":"value","localized_name":"值","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"label":"STRING","localized_name":"字符串","name":"STRING","type":"STRING","links":[45]}],"title":"质量要求  字符串","properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"PrimitiveString","widget_ue_connectable":{}},"widgets_values":["Super Quality, Masterpiece, 8K"]},{"id":35,"type":"Text Concatenate","pos":[316.63250732421875,-648.1005859375],"size":[270,142],"flags":{},"order":11,"mode":4,"inputs":[{"label":"文本_A","localized_name":"text_a","name":"text_a","shape":7,"type":"STRING","link":40},{"label":"文本_B","localized_name":"text_b","name":"text_b","shape":7,"type":"STRING","link":43},{"label":"文本_C","localized_name":"text_c","name":"text_c","shape":7,"type":"STRING","link":45},{"label":"文本_d","localized_name":"text_d","name":"text_d","shape":7,"type":"STRING","link":null},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null},{"localized_name":"clean_whitespace","name":"clean_whitespace","type":"COMBO","widget":{"name":"clean_whitespace"},"link":null}],"outputs":[{"label":"字符串","localized_name":"字符串","name":"STRING","type":"STRING","links":[50]}],"properties":{"cnr_id":"pr-was-node-suite-comfyui-47064894","ver":"ea935d1044ae5a26efa54ebeb18fe9020af49a45","Node name for S&R":"Text Concatenate","widget_ue_connectable":{}},"widgets_values":[", ","true"]},{"id":33,"type":"PrimitiveString","pos":[311.92498779296875,-799.4683837890625],"size":[270,58],"flags":{},"order":3,"mode":4,"inputs":[{"label":"value","localized_name":"值","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"label":"STRING","localized_name":"字符串","name":"STRING","type":"STRING","links":[40]}],"title":"styles 字符串","properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"PrimitiveString","widget_ue_connectable":{}},"widgets_values":["hanfu,chiese styles,"],"color":"#232","bgcolor":"#353"},{"id":9,"type":"SaveImage","pos":[1528.59912109375,-35.935943603515625],"size":[500.8935546875,507.7078857421875],"flags":{},"order":16,"mode":0,"inputs":[{"label":"图像","localized_name":"图片","name":"images","type":"IMAGE","link":9},{"localized_name":"文件名前缀","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"SaveImage","widget_ue_connectable":{}},"widgets_values":["ComfyUI"]},{"id":8,"type":"VAEDecode","pos":[1272.1431884765625,13.357952117919922],"size":[210,46],"flags":{},"order":14,"mode":0,"inputs":[{"label":"Latent","localized_name":"Latent","name":"samples","type":"LATENT","link":7},{"label":"VAE","localized_name":"vae","name":"vae","type":"VAE","link":8}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[9]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":3,"type":"KSampler","pos":[882.2415161132812,9.36138916015625],"size":[315,474],"flags":{},"order":12,"mode":0,"inputs":[{"label":"模型","localized_name":"模型","name":"model","type":"MODEL","link":47},{"label":"正面条件","localized_name":"正面条件","name":"positive","type":"CONDITIONING","link":4},{"label":"负面条件","localized_name":"负面条件","name":"negative","type":"CONDITIONING","link":6},{"label":"Latent","localized_name":"Latent图像","name":"latent_image","type":"LATENT","link":2},{"localized_name":"随机种","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"步数","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"CFG","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"采样器","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"调度器","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"降噪","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"label":"Latent","localized_name":"Latent","name":"LATENT","type":"LATENT","slot_index":0,"links":[7]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"KSampler","widget_ue_connectable":{}},"widgets_values":[458831198278657,"randomize",20,8,"euler","normal",1]},{"id":6,"type":"CLIPTextEncode","pos":[407.087890625,34.54948425292969],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":9,"mode":0,"inputs":[{"label":"CLIP","localized_name":"clip","name":"clip","type":"CLIP","link":49},{"localized_name":"文本","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"label":"条件","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[4]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{}},"widgets_values":["hanfu,a chinese man is talking",[false,true]]},{"id":7,"type":"CLIPTextEncode","pos":[398.009033203125,290.8335266113281],"size":[425.27801513671875,180.6060791015625],"flags":{},"order":10,"mode":0,"inputs":[{"label":"CLIP","localized_name":"clip","name":"clip","type":"CLIP","link":54},{"localized_name":"文本","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"label":"条件","localized_name":"条件","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[6]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{}},"widgets_values":["text, watermark,nfsw",[false,true]]},{"id":37,"type":"LoraLoader","pos":[13.087238311767578,30.337453842163086],"size":[365.70269775390625,146.21890258789062],"flags":{},"order":7,"mode":0,"inputs":[{"label":"模型","localized_name":"模型","name":"model","type":"MODEL","link":46},{"label":"CLIP","localized_name":"CLIPCLIP","name":"clip","type":"CLIP","link":48},{"localized_name":"LoRA名称","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"模型强度","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null},{"localized_name":"CLIP强度","name":"strength_clip","type":"FLOAT","widget":{"name":"strength_clip"},"link":null}],"outputs":[{"label":"模型","localized_name":"模型","name":"MODEL","type":"MODEL","links":[47]},{"label":"CLIP","localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[49,54]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"LoraLoader","widget_ue_connectable":{}},"widgets_values":["F.1-穿越汉代_古风写实_激活词hanfu_xr1.0.safetensors",5.000000000000001,1]},{"id":5,"type":"EmptyLatentImage","pos":[19.83736801147461,302.8310852050781],"size":[315,106],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"宽度","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"高度","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"批次大小","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"label":"Latent","localized_name":"Latent","name":"LATENT","type":"LATENT","slot_index":0,"links":[2]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"EmptyLatentImage","widget_ue_connectable":{}},"widgets_values":[512,512,1]},{"id":39,"type":"Reroute","pos":[503.8433532714844,-225.3568115234375],"size":[75,26],"flags":{},"order":15,"mode":0,"inputs":[{"name":"","type":"*","link":52}],"outputs":[{"name":"","type":"STRING","links":null}],"properties":{"showOutputText":false,"horizontal":false,"widget_ue_connectable":{}}},{"id":4,"type":"CheckpointLoaderSimple","pos":[-465.9291687011719,27.891040802001953],"size":[414.7917175292969,129.60433959960938],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"Checkpoint名称","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"label":"模型","localized_name":"模型","name":"MODEL","type":"MODEL","slot_index":0,"links":[46]},{"label":"CLIP","localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[48]},{"label":"VAE","localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[8]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"CheckpointLoaderSimple","models":[{"name":"v1-5-pruned-emaonly-fp16.safetensors","url":"https://huggingface.co/Comfy-Org/stable-diffusion-v1-5-archive/resolve/main/v1-5-pruned-emaonly-fp16.safetensors?download=true","directory":"checkpoints"}],"widget_ue_connectable":{}},"widgets_values":["anything-v5-PrtRE-sd1_5_fp8_0.ckpt"]}],"links":[[2,5,0,3,3,"LATENT"],[4,6,0,3,1,"CONDITIONING"],[6,7,0,3,2,"CONDITIONING"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[9,8,0,9,0,"IMAGE"],[23,20,0,21,1,"FL2MODEL"],[25,23,0,21,0,"IMAGE"],[28,21,2,26,0,"STRING"],[40,33,0,35,0,"STRING"],[43,26,0,35,1,"STRING"],[45,36,0,35,2,"STRING"],[46,4,0,37,0,"MODEL"],[47,37,0,3,0,"MODEL"],[48,4,1,37,1,"CLIP"],[49,37,1,6,0,"CLIP"],[50,35,0,38,0,"*"],[52,38,0,39,0,"*"],[54,37,1,7,0,"CLIP"]],"groups":[{"id":1,"title":"图片识别 - 提示词生成","bounding":[-625.8392944335938,-950.8626708984375,1379.81201171875,792.1629638671875],"color":"#8A8","font_size":24,"flags":{}},{"id":2,"title":"Text2image","bounding":[-638.2891845703125,-109.53594207763672,2677.78173828125,619.6306762695312],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ue_links":[],"ds":{"scale":0.75897548767407,"offset":[586.1298129531226,243.49994372391902]},"links_added_by_ue":[]},"version":0.4}